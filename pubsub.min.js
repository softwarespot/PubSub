"use strict";function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _typeof(r){return r&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r}var _createClass=function(){function r(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}();!function(r,e,n,t){var u=new n,i={clear:function(){return u.clear()},getInterface:function(){return n},getVersion:function(){return u.getVersion()},publish:function(r){for(var e=arguments.length,n=Array(e>1?e-1:0),t=1;e>t;t++)n[t-1]=arguments[t];return u.publish.apply(u,[r].concat(n))},subscribe:function(r,e){return u.subscribe(r,e)},unsubscribe:function(r,e){return u.unsubscribe(r,e)}},s=function(){return i},c=r.module,o=r.define;if(c!==t&&c.exports?c.exports=s:"function"==typeof o&&o.amd&&r.define(e,[],s),r[e]!==t)throw new r.Error("PubSub appears to be already registered with the global object, therefore the module has not been registered.");r[e]=i}(window,"PubSub",function(r){function e(r){var e=u(r)?g.call(r):null;return e===p||e===y}function n(r){return m(r)&&r.length===b&&r[a]===_&&i(r[f])&&e(r[l])}function t(r){return null===r}function u(r){var e=void 0===r?"undefined":_typeof(r);return!!r&&("object"===e||"function"===e)}function i(r){return("string"==typeof r||g.call(r)===v)&&r.trim().length>0}function s(r){return n(r)?r=[r[f]]:i(r)&&(r=[r]),m(r)?r:null}var c="2.2.4",o=-1,a=0,f=1,l=2,b=3,h="[object Array]",p="[object Function]",y="[object GeneratorFunction]",v="[object String]",g=r.Object.prototype.toString,_="|>|_|85|_|8_|\\/|0|)|_|13",d=[_],m=e(r.Array.isArray)?r.Array.isArray:function(r){return g.call(r)===h};return function(){function u(){_classCallCheck(this,u),this._subscribers={}}return _createClass(u,[{key:"clear",value:function(r){var e=this;return r=s(r),t(r)?void(this._subscribers={}):void r.filter(this._isSubscribed).forEach(function(r){var n=e._subscribers[r],t=n.length;n.splice(0,t)})}},{key:"getVersion",value:function(){return c}},{key:"publish",value:function(e){for(var n=this,u=arguments.length,i=Array(u>1?u-1:0),c=1;u>c;c++)i[c-1]=arguments[c];e=s(e);var o=0;return t(e)?o:(i.push(e.join(",")),e.filter(this._isSubscribed).forEach(function(e){n._subscribers[e].forEach(function(e){r.setTimeout(function(){e.apply(void 0,i)},0),o++})}),o)}},{key:"subscribe",value:function(r,n){var t=this,u=i(r)&&e(n);if(u&&(n=[n],r=[r]),!m(r)||!m(n)||r.length!==n.length)return d;var s=[];return n.filter(function(n,t){return e(n)?!0:(r.splice(t,1),!1)}),r.filter(function(r,e){return i(r)&&t._subscribers[r].indexOf(n[e])===o?!0:(n.splice(e,1),!1)}).forEach(function(r,e){t._isSubscribed(r)||(t._subscribers[r]=m(t._subscribers[r])?t._subscribers[r]:[]);var u=t._subscribers[r],i=n[e];u.push(i),s.push([_,r,i])}),0===s.length?u?d:[d]:u?s[0]:s}},{key:"unsubscribe",value:function(r,t){var u=this;return r===d?!1:(n(r)?(t=[r[l]],r=[r[f]]):i(r)&&e(t)&&(t=[t],r=[r]),m(r)&&m(t)&&r.length===t.length?(r.filter(function(r,e){return u._isSubscribed(r)?!0:(t.splice(e,1),!1)}).forEach(function(r,e){var n=u._subscribers[r],i=n.indexOf(t[e]);i!==o&&n.splice(i,1)}),!0):!1)}},{key:"_isSubscribed",value:function(r){return i(r)&&this._subscribers.hasOwnProperty(r)&&this._subscribers[r].length>0}}]),u}()}(window));
