!function(r,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var e={exports:{}};n(e.exports),r.PubSub=e.exports}}(this,function(r){"use strict";function n(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function e(){return A(null)}function t(r){var n=E.call(r);return n===d||n===w}function u(r){return("string"==typeof r||E.call(r)===j)&&r.trim().length>0}function i(r){return S(r)&&r.length===y&&r[h]===m&&u(r[p])&&t(r[v])}function s(r){return null===r}function c(r,n){return u(r)&&n.hasOwnProperty(r)&&n[r].length>0}function o(r){return i(r)?r=[r[p]]:u(r)&&(r=[r]),S(r)?r:null}Object.defineProperty(r,"__esModule",{value:!0});var f=function(){function r(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}}(),l="2.2.4",a=1,b=-1,h=0,p=1,v=2,y=3,g="[object Array]",d="[object Function]",w="[object GeneratorFunction]",j="[object String]",x=window.Array,k=window.Object,A=k.create,E=k.prototype.toString,O=window.setTimeout,m="|>||85||8|\\/|0|)||13",P=[m],S=t(x.isArray)?x.isArray:function(r){return E.call(r)===g},V=function(){function r(){n(this,r),this.subscribers=e()}return f(r,[{key:"clear",value:function(r){var n=this;return r=o(r),s(r)?void(this.subscribers=e()):void r.filter(function(r){return c(r,n.subscribers)}).forEach(function(r){var e=n.subscribers[r],t=e.length;e.splice(0,t)})}},{key:"getVersion",value:function(){return l}},{key:"publish",value:function(r){for(var n=this,e=arguments.length,t=Array(e>1?e-1:0),u=1;e>u;u++)t[u-1]=arguments[u];r=o(r);var i=0;return s(r)?i:(t.push(r.join(",")),r.filter(function(r){return c(r,n.subscribers)}).forEach(function(r){n.subscribers[r].forEach(function(r){O(function(){r.apply(void 0,t)},0),i++})}),i)}},{key:"subscribe",value:function(r,n){var e=this,i=u(r)&&t(n);if(i&&(n=[n],r=[r]),!S(r)||!S(n)||r.length!==n.length)return P;var s=[];return n.filter(function(n,e){return t(n)?!0:(r.splice(e,a),!1)}),r.filter(function(r,t){return u(r)&&(e.subscribers[r]||[]).indexOf(n[t])===b?!0:(n.splice(t,a),!1)}).forEach(function(r,t){c(r,e.subscribers)||(e.subscribers[r]=S(e.subscribers[r])?e.subscribers[r]:[]);var u=e.subscribers[r],i=n[t];u.push(i),s.push([m,r,i])}),0===s.length?i?P:[P]:i?s[0]:s}},{key:"unsubscribe",value:function(r,n){var e=this;return r===P?!1:(i(r)?(n=[r[v]],r=[r[p]]):u(r)&&t(n)&&(n=[n],r=[r]),S(r)&&S(n)&&r.length===n.length?(r.filter(function(r,t){return c(r,e.subscribers)?!0:(n.splice(t,a),!1)}).forEach(function(r,t){var u=e.subscribers[r],i=u.indexOf(n[t]);i!==b&&u.splice(i,a)}),!0):!1)}}]),r}(),F=new V;r.clear=function(r){return F.clear(r)},r.getInterface=function(){return V},r.getVersion=function(){return F.getVersion()},r.publish=function(r){for(var n=arguments.length,e=Array(n>1?n-1:0),t=1;n>t;t++)e[t-1]=arguments[t];return F.publish.apply(F,[r].concat(e))},r.subscribe=function(r,n){return F.subscribe(r,n)},r.unsubscribe=function(r,n){return F.unsubscribe(r,n)}});