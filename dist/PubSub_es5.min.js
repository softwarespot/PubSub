!function(r,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var e={exports:{}};n(e.exports),r.PubSub=e.exports}}(this,function(r){"use strict";function n(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function e(){return x(null)}function t(r){var n=k.call(r);return n===_||n===d}function u(r){return("string"==typeof r||k.call(r)===w)&&r.trim().length>0}function i(r){return P(r)&&r.length===g&&r[h]===E&&u(r[p])&&t(r[v])}function s(r){return null===r}function c(r,n){return u(r)&&n.hasOwnProperty(r)&&n[r].length>0}function o(r){return i(r)?r=[r[p]]:u(r)&&(r=[r]),P(r)?r:null}Object.defineProperty(r,"__esModule",{value:!0});var f=function(){function r(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}}(),a="2.2.4",l=1,b=-1,h=0,p=1,v=2,g=3,y="[object Array]",_="[object Function]",d="[object GeneratorFunction]",w="[object String]",m=window.Array,j=window.Object,x=j.create,k=j.prototype.toString,A=window.setTimeout,E="|>|_|85|_|8_|\\/|0|)|_|13",O=[E],P=t(m.isArray)?m.isArray:function(r){return k.call(r)===y},S=function(){function r(){n(this,r),this._subscribers=e()}return f(r,[{key:"clear",value:function(r){var n=this;return r=o(r),s(r)?void(this._subscribers=e()):void r.filter(function(r){return c(r,n._subscribers)}).forEach(function(r){var e=n._subscribers[r],t=e.length;e.splice(0,t)})}},{key:"getVersion",value:function(){return a}},{key:"publish",value:function(r){for(var n=this,e=arguments.length,t=Array(e>1?e-1:0),u=1;e>u;u++)t[u-1]=arguments[u];r=o(r);var i=0;return s(r)?i:(t.push(r.join(",")),r.filter(function(r){return c(r,n._subscribers)}).forEach(function(r){n._subscribers[r].forEach(function(r){A(function(){r.apply(void 0,t)},0),i++})}),i)}},{key:"subscribe",value:function(r,n){var e=this,i=u(r)&&t(n);if(i&&(n=[n],r=[r]),!P(r)||!P(n)||r.length!==n.length)return O;var s=[];return n.filter(function(n,e){return t(n)?!0:(r.splice(e,l),!1)}),r.filter(function(r,t){return u(r)&&(e._subscribers[r]||[]).indexOf(n[t])===b?!0:(n.splice(t,l),!1)}).forEach(function(r,t){c(r,e._subscribers)||(e._subscribers[r]=P(e._subscribers[r])?e._subscribers[r]:[]);var u=e._subscribers[r],i=n[t];u.push(i),s.push([E,r,i])}),0===s.length?i?O:[O]:i?s[0]:s}},{key:"unsubscribe",value:function(r,n){var e=this;return r===O?!1:(i(r)?(n=[r[v]],r=[r[p]]):u(r)&&t(n)&&(n=[n],r=[r]),P(r)&&P(n)&&r.length===n.length?(r.filter(function(r,t){return c(r,e._subscribers)?!0:(n.splice(t,l),!1)}).forEach(function(r,t){var u=e._subscribers[r],i=u.indexOf(n[t]);i!==b&&u.splice(i,l)}),!0):!1)}}]),r}(),V=new S;r.clear=function(r){return V.clear(r)},r.getInterface=function(){return S},r.getVersion=function(){return V.getVersion()},r.publish=function(r){for(var n=arguments.length,e=Array(n>1?n-1:0),t=1;n>t;t++)e[t-1]=arguments[t];return V.publish.apply(V,[r].concat(e))},r.subscribe=function(r,n){return V.subscribe(r,n)},r.unsubscribe=function(r,n){return V.unsubscribe(r,n)}});