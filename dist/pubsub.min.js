"use strict";var PubSub=function(r,n){function t(r){return i(r)&&g.call(r)===l.FUNCTION}function e(n){return r.isArray(n)&&n.length===s&&n[f]===h&&u(n[o])&&t(n[c])}function i(r){var n=typeof r;return!!r&&("object"===n||"function"===n)}function u(r){return("string"==typeof r||g.call(r)===l.STRING)&&r.trim().length>0}var a="0.1.0",f=0,o=1,c=2,s=3,l={FUNCTION:"[object Function]",STRING:"[object String]"},g=n.prototype.toString,h="|>|_|85|_|8_|\\/|0|)|_|13",v=[h],b={};return{subscribe:function(n,e){var i=u(n)&&t(e);if(i&&(e=[e],n=[n]),!r.isArray(n)||!r.isArray(e)||n.length!==e.length)return v;for(var a=[],f=0,o=n.length;o>f;f++){var c=n[f];if(u(c)){var s=e[f];if(t(s)){b[c]=b[c]||[];var l=b[c];-1===l.indexOf(s)&&(l.push(s),a.push([h,c,s]))}}}return 0===a.length?i?v:[v]:i?a[0]:a},unsubscribe:function(n,i){if(n===v)return!1;if(e(n)?(i=[n[c]],n=[n[o]]):u(n)&&t(i)&&(i=[i],n=[n]),!r.isArray(n)||!r.isArray(i)||n.length!==i.length)return!1;for(var a=0,f=n.length;f>a;a++){var s=b[n[a]];if(s){var l=s.indexOf(i[a]);-1!==l&&s.splice(l,1)}}return!0},publish:function(n){for(var t=arguments.length,i=r(t>1?t-1:0),a=1;t>a;a++)i[a-1]=arguments[a];if(e(n)?n=[n[o]]:u(n)&&(n=[n]),!r.isArray(n))return 0;i.push(n.join(","));for(var f=0,c=0,s=n.length;s>c;c++){var l=b[n[c]];if(l)for(var g=0,h=l.length;h>g;g++)l[g].apply(l,i),f++}return f},clear:function(){b={}},getVersion:function(){return a}}}(Array,Object);